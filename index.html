<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø«Ø§Ù†ÙˆÙŠØ© ÙˆÙ…Ø¹Ù‡Ø¯ Ø§Ø¨Ù† Ø®Ù„Ø¯ÙˆÙ† Ø§Ù„Ø®Ø§ØµØ© IPS</title>
    <style>
        :root { --primary: #6c5ce7; --bg: #f4f7fe; --sidebar-w: 260px; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; display: flex; flex-direction: column; }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        .auth-screen { position: fixed; inset: 0; background: white; z-index: 2000; display: flex; align-items: center; justify-content: center; padding: 20px; }
        .auth-card { width: 100%; max-width: 380px; text-align: center; background: white; padding: 30px; border-radius: 25px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }
        .school-logo { width: 80px; height: 80px; margin-bottom: 10px; }
        input, select { width: 100%; padding: 14px; margin: 8px 0; border: 1px solid #ddd; border-radius: 12px; box-sizing: border-box; }
        .btn-main { background: var(--primary); color: white; border: none; padding: 14px; width: 100%; border-radius: 12px; cursor: pointer; font-weight: bold; }

        /* Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© */
        .app-container { display: none; min-height: 100vh; width: 100%; }
        .sidebar { width: var(--sidebar-w); background: white; border-left: 1px solid #eee; padding: 20px; flex-shrink: 0; display: flex; flex-direction: column; align-items: center; }
        .main-content { flex-grow: 1; padding: 20px; box-sizing: border-box; }

        @media (max-width: 768px) {
            .app-container { flex-direction: column; }
            .sidebar { width: 100%; border-left: none; border-bottom: 1px solid #eee; }
        }

        .card { background: white; border-radius: 20px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        .admin-panel { display: none; border: 2px solid #f39c12; background: #fffcf5; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 10px; border-bottom: 1px solid #eee; text-align: center; font-size: 13px; }
    </style>
</head>
<body>

<div id="auth-screen" class="auth-screen">
    <div id="login-box" class="auth-card">
        <img src="https://cdn-icons-png.flaticon.com/512/5351/5351042.png" class="school-logo">
        <h2 style="color:var(--primary); margin:0;">IPS</h2>
        <input type="text" id="user-in" placeholder="ID Ø§Ù„Ø·Ø§Ù„Ø¨ Ø£Ùˆ Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¬Ù‡">
        <input type="password" id="pass-in" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <button class="btn-main" onclick="handleLogin()">Ø¯Ø®ÙˆÙ„</button>
        <p style="font-size: 13px; color: var(--primary); cursor: pointer; margin-top: 15px;" onclick="toggleAuth(true)">Ø£Ù„Ø§ ØªÙ…Ù„Ùƒ Ø­Ø³Ø§Ø¨ØŸ Ø³Ø¬Ù„ Ø§Ù„Ø¢Ù†</p>
    </div>

    <div id="register-box" class="auth-card" style="display:none;">
        <h3 style="color:var(--primary)">ØªØ³Ø¬ÙŠÙ„ Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</h3>
        <input type="text" id="reg-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ">
        <input type="text" id="reg-id" placeholder="ID Ø§Ù„Ø·Ø§Ù„Ø¨">
        <select id="reg-grade">
            <option value="ØªØ§Ø³Ø¹">ØªØ§Ø³Ø¹</option>
            <option value="Ø«Ø§Ù„Ø« Ø«Ø§Ù†ÙˆÙŠ">Ø«Ø§Ù„Ø« Ø«Ø§Ù†ÙˆÙŠ</option>
        </select>
        <input type="password" id="reg-pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <button class="btn-main" onclick="handleRegister()">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
        <p onclick="toggleAuth(false)" style="cursor:pointer; color:var(--primary); margin-top:10px;">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¯Ø®ÙˆÙ„</p>
    </div>
</div>

<div id="main-app" class="app-container">
    <div class="sidebar">
        <img src="https://cdn-icons-png.flaticon.com/512/5351/5351042.png" style="width:50px; margin-bottom:10px;">
        <div id="side-info" style="text-align:center;">
            <h3 id="side-name">Ø§Ù„Ù…ÙˆØ¬Ù‡ Ø§Ù„Ø¹Ø§Ù…</h3>
            <p id="side-id" style="color:#888; font-size:12px;">ID: ADMIN-001</p>
        </div>
        <div style="width:100%; margin-top:20px;">
            <div style="padding:12px; background:#f0edff; color:var(--primary); border-radius:10px; margin-bottom:5px;">ğŸ‘¤ Ù…Ù„ÙØ§ØªÙŠ</div>
            <div id="admin-btn" style="display:none; padding:12px; color:#f39c12; cursor:pointer; font-weight:bold;" onclick="toggleAdmin()">ğŸ›  Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙˆØ¬Ù‡</div>
        </div>
        <button onclick="location.reload()" style="margin-top:auto; width:100%; padding:10px; background:#ff7675; color:white; border:none; border-radius:10px;">Ø®Ø±ÙˆØ¬</button>
    </div>

    <div class="main-content">
        <div id="admin-area" class="card admin-panel">
            <h3>ğŸ‘¥ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ø¬Ø¯Ø¯ ÙˆØ§Ù„Ù…Ø±ØµÙˆØ¯ÙŠÙ†</h3>
            <table id="admin-table">
                <thead><tr><th>Ø§Ù„Ø·Ø§Ù„Ø¨</th><th>ID</th><th>Ø§Ù„ØµÙ</th><th>Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø©</th><th>Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</th></tr></thead>
                <tbody id="admin-list-body"></tbody>
            </table>
        </div>
        <div class="card">
            <h3>ğŸ“Š Ø­Ø§Ù„Ø© Ø§Ù„Ø­Ø³Ø§Ø¨</h3>
            <p>Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… IPS Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ.</p>
        </div>
    </div>
</div>

<script>
    // Ù‡Ø°Ù‡ Ù‡ÙŠ "Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©" Ø§Ù„ØªÙŠ ØªØ¬Ù…Ø¹ Ø§Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ù‚Ø¯Ø§Ù…Ù‰ ÙˆØ§Ù„Ø¬Ø¯Ø¯
    let students = JSON.parse(localStorage.getItem('ips_db')) || [
        { id: "202311632", name: "Ù…Ø­Ù…Ø¯ Ø®Ø§Ù„Ø¯ Ø§Ù„Ø¹Ù„ÙŠ", grade: "Ø«Ø§Ù„Ø« Ø«Ø§Ù†ÙˆÙŠ", pass: "123", quiz: 18, exam: 55 }
    ];

    function toggleAuth(isReg) {
        document.getElementById('login-box').style.display = isReg ? 'none' : 'block';
        document.getElementById('register-box').style.display = isReg ? 'block' : 'none';
    }

    function handleRegister() {
        const name = document.getElementById('reg-name').value;
        const id = document.getElementById('reg-id').value;
        const grade = document.getElementById('reg-grade').value;
        const pass = document.getElementById('reg-pass').value;

        if(!name || !id || !pass) return alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
        
        students.push({ name, id, grade, pass, quiz: 0, exam: 0 });
        localStorage.setItem('ips_db', JSON.stringify(students));
        alert("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø·Ø§Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ø¢Ù† ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙˆØ¬Ù‡.");
        toggleAuth(false);
    }

    function handleLogin() {
        const u = document.getElementById('user-in').value;
        const p = document.getElementById('pass-in').value;

        if(u === "ibn khaldon" && p === "ITmohammedf0@") {
            showDashboard("Ø§Ù„Ù…ÙˆØ¬Ù‡ Ø§Ù„Ø¹Ø§Ù…", "ADMIN-001", true);
        } else {
            const st = students.find(s => s.id === u && s.pass === p);
            if(st) showDashboard(st.name, st.id, false);
            else alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©");
        }
    }

    function showDashboard(name, id, isAdmin) {
        document.getElementById('auth-screen').style.display = 'none';
        document.getElementById('main-app').style.display = 'flex';
        document.getElementById('side-name').innerText = name;
        document.getElementById('side-id').innerText = "ID: " + id;
        if(isAdmin) {
            document.getElementById('admin-btn').style.display = 'block';
            renderAdminTable();
        }
    }

    function toggleAdmin() {
        const area = document.getElementById('admin-area');
        area.style.display = (area.style.display === 'block') ? 'none' : 'block';
    }

    function renderAdminTable() {
        const body = document.getElementById('admin-list-body');
        body.innerHTML = "";
        students.forEach(s => {
            body.innerHTML += `<tr>
                <td>${s.name}</td>
                <td>${s.id}</td>
                <td>${s.grade}</td>
                <td><input type="number" value="${s.quiz}" style="width:40px"></td>
                <td><input type="number" value="${s.exam}" style="width:40px"></td>
            </tr>`;
        });
    }
</script>
</body>
</html>
