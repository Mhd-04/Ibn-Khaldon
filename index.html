<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ø¨Ù† Ø®Ù„Ø¯ÙˆÙ† - Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
    <style>
        :root { --primary: #6c5ce7; --bg: #f8f9fa; --accent: #f39c12; --danger: #ff7675; --success: #27ae60; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--bg); margin: 0; display: flex; }
        
        /* Sidebar - Learnata Style */
        .sidebar { width: 260px; background: white; border-left: 1px solid #eee; height: 100vh; position: sticky; top: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .user-profile { text-align: center; margin-bottom: 30px; }
        .avatar-container { position: relative; width: 100px; height: 100px; margin-bottom: 10px; }
        .user-avatar { width: 100%; height: 100%; border-radius: 50%; border: 3px solid var(--primary); object-fit: cover; background: #eee; }
        .nav-item { width: 100%; padding: 12px; border-radius: 12px; cursor: pointer; display: flex; align-items: center; gap: 10px; color: #555; transition: 0.3s; margin-bottom: 5px; }
        .nav-item:hover, .nav-item.active { background: #f0edff; color: var(--primary); }
        
        /* Main Content */
        .main-content { flex: 1; padding: 25px; overflow-y: auto; }
        .card { background: white; border-radius: 20px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        
        /* Admin Panel Styles */
        .admin-panel { display: none; border: 2px solid var(--accent); background: #fffdf9; position: relative; }
        .status-badge { position: absolute; top: 10px; left: 10px; padding: 5px 15px; border-radius: 20px; font-size: 12px; font-weight: bold; }
        .status-draft { background: #fff4e6; color: #d35400; }
        .status-live { background: #e6fffa; color: #2ecc71; }
        
        .action-btns { display: flex; gap: 10px; margin-top: 20px; }
        .btn { flex: 1; padding: 15px; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 14px; transition: 0.3s; }
        .btn-publish { background: var(--success); color: white; }
        .btn-unpublish { background: var(--danger); color: white; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { padding: 12px; border-bottom: 1px solid #f0f0f0; text-align: center; }
        .grading-input { width: 50px; text-align: center; padding: 5px; border: 1px solid #ddd; border-radius: 5px; }

        /* Login Screen */
        .auth-screen { position: fixed; inset: 0; background: white; z-index: 2000; display: flex; align-items: center; justify-content: center; }
        .auth-card { background: white; padding: 35px; border-radius: 25px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); width: 350px; text-align: center; }
    </style>
</head>
<body>

<div id="auth-area" class="auth-screen">
    <div class="auth-card">
        <h1 style="color:var(--primary); margin-bottom: 5px;">LEARNATA</h1>
        <p style="color:#888; margin-bottom: 25px;">Ø¨ÙˆØ§Ø¨Ø© Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ø¨Ù† Ø®Ù„Ø¯ÙˆÙ†</p>
        <input type="text" id="u-in" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ID" style="width:100%; padding:14px; margin-bottom:12px; border-radius:12px; border:1px solid #ddd; outline:none;">
        <input type="password" id="p-in" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" style="width:100%; padding:14px; margin-bottom:20px; border-radius:12px; border:1px solid #ddd; outline:none;">
        <button onclick="login()" style="width:100%; padding:14px; background:var(--primary); color:white; border:none; border-radius:12px; cursor:pointer; font-weight:bold;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
    </div>
</div>

<div class="sidebar">
    <div class="user-profile">
        <div class="avatar-container">
            <img id="side-img" src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" class="user-avatar">
        </div>
        <div id="side-name" style="font-weight:bold; color:#333;">Ø²Ø§Ø¦Ø±</div>
        <div id="side-role" style="font-size:12px; color:#888;">Ø·Ø§Ù„Ø¨</div>
    </div>
    <div class="nav-item active">ğŸ‘¤ Ù…Ù„ÙØ§ØªÙŠ</div>
    <div class="nav-item">ğŸ’³ Ø§Ù„Ù…Ø§Ù„ÙŠØ©</div>
    <div class="nav-item">ğŸ“ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª</div>
    <div id="admin-link" class="nav-item" style="display:none; color:var(--accent); font-weight:bold;" onclick="toggleAdmin()">ğŸ›  Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙˆØ¬Ù‡</div>
    <button onclick="location.reload()" style="margin-top:auto; width:100%; padding:12px; border-radius:12px; border:none; background:#eee; color:#666; cursor:pointer;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</div>

<div class="main-content">
    
    <div id="admin-area" class="card admin-panel">
        <div id="pub-status" class="status-badge status-draft">ÙˆØ¶Ø¹ÙŠØ© Ø§Ù„Ù…Ø³ÙˆØ¯Ø© (Ù…Ø®ÙÙŠ)</div>
        <h3 style="margin-top:20px;">ğŸ“ Ø±ØµØ¯ ÙˆØªØ¯Ù‚ÙŠÙ‚ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª</h3>
        <p style="font-size:13px; color:#666;">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ù‡Ù†Ø§Ø› Ù„Ù† ØªØ¸Ù‡Ø± Ù„Ù„Ø·Ù„Ø§Ø¨ Ø¥Ù„Ø§ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù†Ø´Ø±.</p>
        
        <div id="admin-table-container"></div>
        
        <div class="action-btns">
            <button class="btn btn-publish" onclick="setPublish(true)">ğŸš€ Ù†Ø´Ø± Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ù„Ù„Ø·Ù„Ø§Ø¨</button>
            <button class="btn btn-unpublish" onclick="setPublish(false)">ğŸ“¥ Ø³Ø­Ø¨ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª (Ø¥Ø®ÙØ§Ø¡)</button>
        </div>
    </div>

    <div id="student-view">
        <div class="card">
            <h2 id="wel-msg">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ</h2>
            <p id="grade-info" style="color:#888"></p>
        </div>

        <div class="card">
            <h3>ğŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</h3>
            <div id="no-grades-msg" style="padding:40px; text-align:center; color:#999; border:2px dashed #eee; border-radius:20px;">
                âš™ï¸ Ø¬Ø§Ø±ÙŠ Ø±ØµØ¯ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ù…ÙˆØ¬Ù‡.. Ø³ÙŠØªÙ… Ø¥Ø´Ø¹Ø§Ø±ÙƒÙ… Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø´Ø±.
            </div>
            <table id="grade-table" style="display:none;">
                <thead>
                    <tr><th>Ø§Ù„Ù…Ø§Ø¯Ø©</th><th>Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø©</th><th>Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</th><th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹</th></tr>
                </thead>
                <tbody id="grade-body"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
    // Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø°ÙƒÙŠ
    let isPublished = false;
    let students = [
        { id: "202311362", name: "Ù…Ø­Ù…Ø¯ Ø®Ø§Ù„Ø¯ Ø§Ù„Ø¹Ù„ÙŠ", grade: "Ø«Ø§Ù„Ø« Ø«Ø§Ù†ÙˆÙŠ", quiz: 0, exam: 0, pass: "123", img: "https://i.pravatar.cc/150?u=1" },
        { id: "202311400", name: "Ø£Ø­Ù…Ø¯ Ø§Ù„Ø­Ù…ØµÙŠ", grade: "ØªØ§Ø³Ø¹", quiz: 0, exam: 0, pass: "123", img: "https://i.pravatar.cc/150?u=2" }
    ];

    function login() {
        const u = document.getElementById('u-in').value;
        const p = document.getElementById('p-in').value;

        if(u === "ibn khaldon" && p === "ITmohammedf0@") {
            setupUI("Ø§Ù„Ù…ÙˆØ¬Ù‡ Ø§Ù„Ø¹Ø§Ù…", "Ø¥Ø¯Ø§Ø±Ø©", true);
        } else {
            const st = students.find(s => s.id === u && s.pass === p);
            if(st) setupUI(st.name, st.grade, false, st);
            else alert("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
        }
    }

    function setupUI(name, role, isAdmin, data = null) {
        document.getElementById('auth-area').style.display = 'none';
        document.getElementById('side-name').innerText = name;
        document.getElementById('side-role').innerText = role;
        
        if(isAdmin) {
            document.getElementById('admin-link').style.display = 'flex';
            document.getElementById('side-img').src = "https://cdn-icons-png.flaticon.com/512/9440/9440932.png";
            renderAdmin();
        } else {
            document.getElementById('wel-msg').innerText = "Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒØŒ " + name;
            document.getElementById('grade-info').innerText = "Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©: " + role;
            document.getElementById('side-img').src = data.img;
            refreshStudentTable(data);
        }
    }

    function toggleAdmin() {
        const a = document.getElementById('admin-area');
        a.style.display = (a.style.display === 'block') ? 'none' : 'block';
    }

    function renderAdmin() {
        const container = document.getElementById('admin-table-container');
        let html = `<table><tr><th>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨</th><th>Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø©</th><th>Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†</th></tr>`;
        students.forEach(s => {
            html += `<tr>
                <td>${s.name}</td>
                <td><input type="number" class="grading-input" onchange="updateScore('${s.id}', 'quiz', this.value)" value="${s.quiz}"></td>
                <td><input type="number" class="grading-input" onchange="updateScore('${s.id}', 'exam', this.value)" value="${s.exam}"></td>
            </tr>`;
        });
        html += `</table>`;
        container.innerHTML = html;
    }

    function updateScore(id, type, val) {
        const st = students.find(s => s.id === id);
        if(st) st[type] = parseInt(val) || 0;
    }

    function setPublish(status) {
        isPublished = status;
        const badge = document.getElementById('pub-status');
        if(status) {
            badge.innerText = "ğŸš€ Ø§Ù„Ø­Ø§Ù„Ø©: Ù…Ù†Ø´ÙˆØ±Ø© Ù„Ù„Ø·Ù„Ø§Ø¨";
            badge.className = "status-badge status-live";
            alert("ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ† Ù„Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„Ø¢Ù† Ø±Ø¤ÙŠØ© Ù†ØªØ§Ø¦Ø¬Ù‡Ù….");
        } else {
            badge.innerText = "ÙˆØ¶Ø¹ÙŠØ© Ø§Ù„Ù…Ø³ÙˆØ¯Ø© (Ù…Ø®ÙÙŠ)";
            badge.className = "status-badge status-draft";
            alert("ØªÙ… Ø³Ø­Ø¨ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª ÙˆØ¥Ø®ÙØ§Ø¤Ù‡Ø§ Ø¹Ù† Ø§Ù„Ø·Ù„Ø§Ø¨.");
        }
    }

    function refreshStudentTable(st) {
        if(isPublished) {
            document.getElementById('no-grades-msg').style.display = 'none';
            document.getElementById('grade-table').style.display = 'table';
            document.getElementById('grade-body').innerHTML = `
                <tr><td>Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</td><td>${st.quiz}</td><td>${st.exam}</td><td>${st.quiz + st.exam}</td></tr>
            `;
        } else {
            document.getElementById('no-grades-msg').style.display = 'block';
            document.getElementById('grade-table').style.display = 'none';
        }
    }
</script>
</body>
</html>
